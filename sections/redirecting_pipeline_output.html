

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>20. Redirecting Pipeline Output &mdash; Cog Book 1.0.0 documentation</title>
  


    <link rel="shortcut icon" href="../_static/favicon.ico"/>


  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Cog Book 1.0.0 documentation" href="../index.html"/>
        <link rel="next" title="21. Triggers" href="triggers.html"/>
        <link rel="prev" title="19. Command pipelines" href="command_pipelines.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cog Book
          

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
          </a>

          
            <img src="../_static/cog_peek.svg" class="logo" />
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">1. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootstrapping_cog.html">2. Bootstrapping Cog</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_and_managing_relays.html">3. Installing and Managing Relays</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands_and_bundles.html">4. Commands and Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_bundles.html">5. Managing Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_a_command_bundle.html">6. Writing A Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuring_password_resets.html">7. Configuring password resets</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions_and_rules.html">8. Permissions and Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_execution_rules.html">9. Command Execution Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundle_configs.html">10. Bundle Configs</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_environment_variables.html">11. Command Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_command_configuration.html">12. Dynamic Command Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="returning_data_from_cog.html">13. Returning data from Cog</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">14. Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">15. Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_your_first_command_bundle.html">16. Installing Your First Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing_a_trigger.html">17. Developing a Trigger</a></li>
<li class="toctree-l1"><a class="reference internal" href="cog_architecture.html">18. Cog Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_pipelines.html">19. Command pipelines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">20. Redirecting Pipeline Output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#redirection-destinations">20.1. Redirection Destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multiple-redirect-destinations">20.2. Multiple Redirect Destinations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#easter-egg-trolling-your-coworkers">20.3. Easter Egg: Trolling Your Coworkers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="triggers.html">21. Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_management.html">22. User management</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor_license_agreement.html">23. Contributor License Agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/cog_server_configuration.html">24. Cog Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/relay_configuration.html">25. Relay Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/command_output_tags.html">26. Command Output Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/greenbar_tags.html">27. Greenbar Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/audit_log_events.html">28. Audit Log Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/glossary.html">29. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/designing_for_chatops.html">30. Designing ChatOps Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/chat_platforms.html">31. Notes on Chat Platform Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Cog Book</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          









<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>20. Redirecting Pipeline Output</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/operable/cog-book/blob/HEAD/cog-book/source/sections/redirecting_pipeline_output.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="redirecting-pipeline-output">
<h1>20. Redirecting Pipeline Output<a class="headerlink" href="#redirecting-pipeline-output" title="Permalink to this headline">¶</a></h1>
<p><em>If it’s good enough for your terminal, it’s good enough for your chat
bot</em></p>
<p>Normally when you execute a chat command, the output will be sent to the
same place you typed the command. That is, if you’re talking with Cog in
your <code class="docutils literal"><span class="pre">#general</span></code> Slack channel, output will show up in <code class="docutils literal"><span class="pre">#general</span></code> as
well.</p>
<p>However, it can be useful to have output go to another location (or even
multiple locations!). Cog provides two operators for this: <code class="docutils literal"><span class="pre">&gt;</span></code> for
single-destination redirects, and <code class="docutils literal"><span class="pre">*&gt;</span></code> for multiple destinations.</p>
<p>This can be great for ensuring that everyone that needs to know what’s
going on is clued in. As it turns out, it’s also great for trolling your
coworkers, as we’ll see icon:smile-o[]</p>
<div class="section" id="redirection-destinations">
<h2>20.1. Redirection Destinations<a class="headerlink" href="#redirection-destinations" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Chat User</dt>
<dd><p class="first">You can direct output to an individual user by using their chat
handle as a destination.</p>
<p><strong>Cog.</strong></p>
<div class="code text highlight-default"><div class="highlight"><pre><span></span>!echo &quot;Hi, boss!&quot; &gt; @imbriaco
</pre></div>
</div>
<p>The output will show up in a one-on-one chat conversation between
the Cog bot and the user.</p>
<p class="last">One important thing to note is that this target is the <em>chat handle</em>
of the person, and not their Cog username (which may be different).
Another thing to be aware of is the destination must be formatted
according to your chat platform’s conventions for mentioning users.
For example, if you’re using Slack, <code class="docutils literal"><span class="pre">&#64;imbriaco</span></code> would be valid,
but just <code class="docutils literal"><span class="pre">imbriaco</span></code> (without the <code class="docutils literal"><span class="pre">&#64;</span></code>) would be <em>invalid</em>. On the
other hand, If you’re using IRC, which has no such conventions, you
would use just the bare chat handle (here, <code class="docutils literal"><span class="pre">imbriaco</span></code>).</p>
</dd>
<dt>Chat Room / Channel</dt>
<dd><p class="first">Instead of sending the output of a command to only one person, you
can alternatively send it to a chat room. The notation is similar to
that for individual users:</p>
<p><strong>Cog.</strong></p>
<div class="code text highlight-default"><div class="highlight"><pre><span></span>!echo &quot;I love our operations team!&quot; &gt; #ops
</pre></div>
</div>
<p class="last">Just as with user redirection destinations, your chat room’s name
must be formatted according to the expected conventions of your chat
provider (e.g. <code class="docutils literal"><span class="pre">#ops</span></code> but not <code class="docutils literal"><span class="pre">ops</span></code> on Slack, etc.)</p>
</dd>
</dl>
<dl class="docutils" id="here-alias">
<dt><strong>here</strong> Alias</dt>
<dd><p class="first">Cog provides a special alias <code class="docutils literal"><span class="pre">here</span></code> that is shorthand for
&#8220;wherever the command came from&#8221;. In fact, if you provide no
redirect destinations, Cog will effectively treat it as though you
redirected to <code class="docutils literal"><span class="pre">here</span></code>. That is, <code class="docutils literal"><span class="pre">!echo</span> <span class="pre">&quot;Hello&quot;</span></code> and
<code class="docutils literal"><span class="pre">!echo</span> <span class="pre">&quot;Hello&quot;</span> <span class="pre">&gt;</span> <span class="pre">here</span></code> will behave identically. If you do provide
explicit redirect destinations, however, you will need to provide
<code class="docutils literal"><span class="pre">here</span></code> if you would also like output to go to wherever you are
currently typing.</p>
<p>While this is sometimes useful in chat, it becomes more useful when
setting up pipelines that are triggered remotely.</p>
<p class="last">This alias is always the literal string <code class="docutils literal"><span class="pre">here</span></code>, regardless of chat
platform.</p>
</dd>
</dl>
<dl class="docutils" id="me-alias">
<dt><strong>me</strong> Alias</dt>
<dd><p class="first">Similar to <code class="docutils literal"><span class="pre">here</span></code>, the <code class="docutils literal"><span class="pre">me</span></code> alias is a shortcut for sending
output to yourself.</p>
<p class="last">This alias is always the literal string <code class="docutils literal"><span class="pre">me</span></code>, regardless of chat
platform.</p>
</dd>
</dl>
<dl class="docutils" id="chat-urls">
<dt><strong>chat://</strong> URLs</dt>
<dd><p class="first">Under the hood, a user or room redirect destination like
<code class="docutils literal"><span class="pre">#general</span></code> is actually treated as though it were typed
<code class="docutils literal"><span class="pre">chat://#general</span></code>. This URL syntax instructs Cog to use the
currently-configured chat adapter to send output to <code class="docutils literal"><span class="pre">#general</span></code>,
whatever that means for that specific chat adapter.</p>
<p>This additional syntax is unnecessary when you are interacting with
Cog via chat; <code class="docutils literal"><span class="pre">!echo</span> <span class="pre">&quot;Hello&quot;</span> <span class="pre">&gt;</span> <span class="pre">#general</span></code> expands to
<code class="docutils literal"><span class="pre">!echo</span> <span class="pre">&quot;Hello&quot;</span> <span class="pre">&gt;</span> <span class="pre">chat://#general</span></code>, because Cog defaults to sending
output via the same adapter it received the input.</p>
<p class="last">However, this URL syntax becomes required when you interact with Cog
through non-chat means, such as by triggering pipelines via the HTTP
adapter. In that case, you may want output to show up in chat, but
the HTTP adapter does not know how to resolve <code class="docutils literal"><span class="pre">#general</span></code> to your
Slack channel. By using <code class="docutils literal"><span class="pre">chat://#general</span></code>, you’re instructing Cog
to hand off output processing to your chat adapter instead.</p>
</dd>
</dl>
</div>
<div class="section" id="multiple-redirect-destinations">
<h2>20.2. Multiple Redirect Destinations<a class="headerlink" href="#multiple-redirect-destinations" title="Permalink to this headline">¶</a></h2>
<p>By altering our syntax slightly, we can redirect to any number of
destinations, which is useful for keeping multiple parties in the loop.</p>
<p>If you’re in the middle of an incident, you could imagine using a
notional <code class="docutils literal"><span class="pre">tweet</span></code> command to alert users of your service, while using
redirection to let your support and operations teams know that
something’s up, all at the same time:</p>
<p><strong>Cog.</strong></p>
<div class="code text highlight-default"><div class="highlight"><pre><span></span>!tweet &quot;Investigating slow API response times&quot; *&gt; here #support #ops @brent
</pre></div>
</div>
<p>Instead of <code class="docutils literal"><span class="pre">&gt;</span></code>, we use <code class="docutils literal"><span class="pre">*&gt;</span></code>. Now the utility of aliases comes into
play; we would also probably like a record of what’s happening in the
current channel, as well as bringing others into the situation.</p>
</div>
<div class="section" id="easter-egg-trolling-your-coworkers">
<h2>20.3. Easter Egg: Trolling Your Coworkers<a class="headerlink" href="#easter-egg-trolling-your-coworkers" title="Permalink to this headline">¶</a></h2>
<p>As we stumbled upon here at Operable, redirection can also be used to
troll your coworkers. Simply type commands in a private chat with the
bot (where nobody can see what you’re doing) and redirect the output to
the destination(s) of your choice.</p>
<p><strong>Cog.</strong></p>
<div class="code text highlight-default"><div class="highlight"><pre><span></span>!echo &quot;I&#39;m sorry Dave; I&#39;m afraid I can&#39;t do that.&quot; &gt; #general
</pre></div>
</div>
<p>Remember: with great power comes great responsibility!</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="triggers.html" class="btn btn-neutral float-right" title="21. Triggers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="command_pipelines.html" class="btn btn-neutral" title="19. Command pipelines" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Operable, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61670076-4', 'auto');
  ga('send', 'pageview');

  </script>
  


</body>
</html>