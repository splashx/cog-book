

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>30. Designing ChatOps Commands &mdash; Cog Book 1.0.0 documentation</title>
  


    <link rel="shortcut icon" href="../_static/favicon.ico"/>


  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Cog Book 1.0.0 documentation" href="../index.html"/>
        <link rel="next" title="31. Notes on Chat Platform Support" href="chat_platforms.html"/>
        <link rel="prev" title="29. Glossary" href="glossary.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cog Book
          

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
          </a>

          
            <img src="../_static/cog_peek.svg" class="logo" />
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sections/getting_started.html">1. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/bootstrapping_cog.html">2. Bootstrapping Cog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/installing_and_managing_relays.html">3. Installing and Managing Relays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/commands_and_bundles.html">4. Commands and Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/managing_bundles.html">5. Managing Bundles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/writing_a_command_bundle.html">6. Writing A Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/configuring_password_resets.html">7. Configuring password resets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/permissions_and_rules.html">8. Permissions and Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/command_execution_rules.html">9. Command Execution Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/bundle_configs.html">10. Bundle Configs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/command_environment_variables.html">11. Command Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/dynamic_command_configuration.html">12. Dynamic Command Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/returning_data_from_cog.html">13. Returning data from Cog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/services.html">14. Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/templates.html">15. Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/installing_your_first_command_bundle.html">16. Installing Your First Command Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/developing_a_trigger.html">17. Developing a Trigger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/cog_architecture.html">18. Cog Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/command_pipelines.html">19. Command pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/redirecting_pipeline_output.html">20. Redirecting Pipeline Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/triggers.html">21. Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/user_management.html">22. User management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections/contributor_license_agreement.html">23. Contributor License Agreement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/cog_server_configuration.html">24. Cog Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/relay_configuration.html">25. Relay Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/command_output_tags.html">26. Command Output Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/greenbar_tags.html">27. Greenbar Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/audit_log_events.html">28. Audit Log Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">29. Glossary</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">30. Designing ChatOps Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#small-sharp-tools">30.1. Small Sharp Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#naming">30.2. Naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="#designing-command-interfaces">30.3. Designing Command Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline-friendly-output">30.4. Pipeline Friendly Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chat_platforms.html">31. Notes on Chat Platform Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Cog Book</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          









<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>30. Designing ChatOps Commands</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/operable/cog-book/blob/HEAD/cog-book/source/appendices/designing_for_chatops.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="designing-chatops-commands">
<h1>30. Designing ChatOps Commands<a class="headerlink" href="#designing-chatops-commands" title="Permalink to this headline">¶</a></h1>
<div class="section" id="small-sharp-tools">
<h2>30.1. Small Sharp Tools<a class="headerlink" href="#small-sharp-tools" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Commands should do one thing well. Multiple modes or actions indicate
poor design.</li>
<li>Perform complex workflows by composing multiple commands into
pipelines.<ul>
<li>Complex commands are inscrutable black boxes.</li>
<li>Complex pipelines are explicit and readable.</li>
</ul>
</li>
<li>Define aliases and use them to run common pipelines.</li>
</ul>
</div>
<div class="section" id="naming">
<h2>30.2. Naming<a class="headerlink" href="#naming" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Bundle and command names should be descriptive but short as possible:
<code class="docutils literal"><span class="pre">cp</span></code>, <code class="docutils literal"><span class="pre">mv</span></code>, <code class="docutils literal"><span class="pre">tr</span></code>.</li>
<li>Short bundle names minimize the pain of manually disambiguating
command name conflicts. <code class="docutils literal"><span class="pre">s3:cp</span></code> not <code class="docutils literal"><span class="pre">aws-s3:cp</span></code>.</li>
<li>Good bundle names avoid doing too much. Prefer <code class="docutils literal"><span class="pre">s3</span></code> over <code class="docutils literal"><span class="pre">aws</span></code>.</li>
</ul>
</div>
<div class="section" id="designing-command-interfaces">
<h2>30.3. Designing Command Interfaces<a class="headerlink" href="#designing-command-interfaces" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">A well designed command reads like prose and can be diagrammed like a
sentence.</p>
<ul class="simple">
<li>noun verb noun → bundle command arg(s)</li>
<li>The tree caught the kite → tree:catch kite</li>
</ul>
</li>
<li><p class="first">Follow existing Unix CLI conventions when possible. <em>Especially</em> when
building a command which is similar to an existing Unix command.
<code class="docutils literal"><span class="pre">s3:cp</span> <span class="pre">src</span> <span class="pre">dest</span></code> not <code class="docutils literal"><span class="pre">s3:cp</span> <span class="pre">--source=src</span> <span class="pre">--dest=dest</span></code>.</p>
</li>
<li><p class="first">Prefer arguments over options.</p>
<ul class="simple">
<li>Arguments require less typing and naturally support multiple
values.</li>
<li>Options require more typing and are clunky to use when multiple
values must be given.</li>
</ul>
</li>
<li><p class="first">Arguments should refer to targets of the same or closely related
types.</p>
</li>
<li><p class="first">When using options set sane default values to the maximum extent
possible. Target the most common use cases.</p>
<ul class="simple">
<li>Options should be used to indicate when the command should depart
from default behaviors. For example, a ‘s3:ls` command might have
a <code class="docutils literal"><span class="pre">--acls</span></code> option to indicate when it should display bucket
entries’ S3 ACLs.</li>
</ul>
</li>
<li><p class="first">Obey the <em>DWIM</em> (Do What I Mean) principle as much as possible. If
you have a <code class="docutils literal"><span class="pre">pagerduty:page</span></code> command that takes a username and send
a message, don’t require quotes around the message — simply
concatenate all of the arguments after the name since you can
reasonably infer the intent.</p>
<blockquote>
<div><p><strong>Note</strong></p>
<p><strong>Bad</strong>:
<code class="docutils literal"><span class="pre">pagerduty:page</span> <span class="pre">--user=djohnson</span> <span class="pre">--message=&quot;has</span> <span class="pre">the</span> <span class="pre">db</span> <span class="pre">restore</span> <span class="pre">finished?&quot;</span></code></p>
<p><strong>Better</strong>:
<code class="docutils literal"><span class="pre">pagerduty:page</span> <span class="pre">djohnson</span> <span class="pre">&quot;has</span> <span class="pre">the</span> <span class="pre">db</span> <span class="pre">restore</span> <span class="pre">finished?&quot;</span></code></p>
<p><strong>Best</strong>: <code class="docutils literal"><span class="pre">pagerduty:page</span> <span class="pre">djohnson</span> <span class="pre">has</span> <span class="pre">the</span> <span class="pre">db</span> <span class="pre">restore</span> <span class="pre">finished?</span></code></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="pipeline-friendly-output">
<h2>30.4. Pipeline Friendly Output<a class="headerlink" href="#pipeline-friendly-output" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Design tools with the expectation that they’ll be combined with other
tools and as part of scripts.</li>
<li>Avoid reusing field names to refer to different types of data
whenever possible.<ul>
<li>Nested collections are the only exception. The collection field
name provides enough context to avoid confusion.</li>
</ul>
</li>
<li>Bias toward returning data verbosely and filtering what the user is
presented with at the template level. This allows maximum flexibility
to work with the returned data in ways that the author did not
expect.</li>
<li>Templates should focus on providing the simplest possible output that
returns the most commonly needed data.</li>
<li>Only accumulate output when you absolutely must. Prefer stateless
commands over stateful streaming commands.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="chat_platforms.html" class="btn btn-neutral float-right" title="31. Notes on Chat Platform Support" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="glossary.html" class="btn btn-neutral" title="29. Glossary" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Operable, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-61670076-4', 'auto');
  ga('send', 'pageview');

  </script>
  


</body>
</html>